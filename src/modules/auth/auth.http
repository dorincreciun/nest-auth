### Variabile Globale
@baseUrl = http://127.0.0.1:5000/api/v1
@contentType = application/json

# ==============================================================================
# SECȚIUNEA 1: REGISTER
# ==============================================================================

### 1. Test Register: Succes
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "email": "test.user@example.com",
  "password": "Password123!",
  "firstName": "Ion",
  "lastName": "Popescu"
}

> {%
    // Această linie salvează accessToken-ul în variabila globală a mediului
    client.global.set("accessToken", response.body.accessToken);
%}

###
# ==============================================================================
# SECȚIUNEA 2: LOGIN
# ==============================================================================

### 2. Test Login: Succes
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "test.user@example.com",
  "password": "Password123!"
}

> {%
    client.global.set("accessToken", response.body.accessToken);
%}

###
# ==============================================================================
# SECȚIUNEA 3: RUTE PROTEJATE (Folosind variabila salvată)
# ==============================================================================

### 3. Test Refresh Token (Cookie-ul este trimis automat de WebStorm)
POST {{baseUrl}}/auth/refresh
Content-Type: {{contentType}}

> {%
    client.global.set("accessToken", response.body.accessToken);
%}

### 4. Test Logout
POST {{baseUrl}}/auth/logout
Content-Type: {{contentType}}

### 5. Test Rută Protejată (Exemplu)
GET {{baseUrl}}/users/me
Authorization: Bearer {{accessToken}}